{% extends 'base.html.twig' %}
{% set users = render(path('api_user_index'))|json_decode %}

{% block title %} - User index{% endblock %}


{% block path %}
    <a>Paramètres/</a>
    <a>Administration/</a>
    <a href="{{ path('app_user_index') }}">Utilisateurs/</a>
{% endblock %}
{% block content %}
    <h1>User index</h1>

    <table class="table">
        <thead>
                <tr>
                    <th>Email</th>
                    <th>Name</th>
                    <th>Roles</th>
                    <th>Id</th>
                </tr>
        </thead>
        <tbody>
                {% for user in users %}
                    <tr onclick="window.location.href = '{{ path("app_user_show", {"id": user.id }) }}'">
                        <td>{{ user.email }}</td>
                        <td>{{ user.name }}</td>
                        <td>{{ user.roles ? user.roles|json_encode : '' }}</td>
                        <td>{{ user.id }}</td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="4">aucun utilisateur répertorier</td>
                    </tr>
                {% endfor %}
        </tbody>
    </table>

    <a class="btn create" href="{{ path('app_register') }}">Créer nouvel utilisateur</a>

{% endblock %}

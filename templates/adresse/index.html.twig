{% extends 'base.html.twig' %}
{% set adresses = render(path('api_adresse_index'))|json_decode %}

{% block title %} - Adresse index{% endblock %}


{% block path %}
    <a href="{{ path('app_adresse_index') }}">Adresses</a>
{% endblock %}
{% block content %}
    <table class="table">
        <thead>
                <tr>
                    <th>Adresse</th>
                    <th>Société</th>
                    <th>Nom du Site</th>
                </tr>
        </thead>
        <tbody>
            {% for adresse in adresses %}
                <tr onclick="window.location.href = '{{ path('app_adresse_index')}}/{{ adresse.id }}'">
                    
                    <td>
                        {{ adresse.numeroVoie }} {{ adresse.nomVoie }},<br>
                        {{ adresse.codePostal }} {{ adresse.commune }}, {{ adresse.pays }}
                    </td>
                    <td>{{ adresse.societe.nom }}</td>
                    <td>{{ adresse.nomSite }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <a class="btn create" onclick="uiPopupBtn('#nvlAdresse')">Create new</a>

    <div id="nvlAdresse"> <!-- popup NVL adresse -->
        <span>Créer une nouvelle adresse :</span>

        {{ include('adresse/_form.html.twig') }}
        
    </div>
    

    <script>
        $(function(){
            $( "#nvlAdresse" ).popup();
        });
    </script>
    
{% endblock %}